"use strict";var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i,s=arguments[e];for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},_createClass=function(){function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}}();function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var getRect=function(t){return t.getBoundingClientRect()},getMousePos=function(t){var e={};return t&&void 0!==t.target&&(e.x=t&&t.clientX||t.touches&&t.touches[0].clientX,e.y=t&&t.clientY||t.touches&&t.touches[0].clientY),e},inOutQuad=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},JsSlide=function(){function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".slide-cont",e=arguments[1];_classCallCheck(this,i),this.option=_extends({type:"carousel",infinite:!1,drag:!1,reactDrag:!1,timer:!1,timerSpeed:2e3,duration:500,start:1,show:1,between:0},e),this.$wrap=document.querySelector(t),this.$el={slide:this.$wrap.querySelector(".slide"),slideItem:this.$wrap.querySelectorAll(".slide li"),slideItemDub:null,btnPrev:this.$wrap.querySelector(".btn-prev"),btnNext:this.$wrap.querySelector(".btn-next"),indicator:this.$wrap.querySelector(".indicator"),indicatorItem:null,btnTimer:this.$wrap.querySelector(".btn-timer")},this.slideNow=0,this.slidePrev=0,this.slideNext=0,this.slideNum=this.$el.slideItem.length,this.rectSlide={},this.itemWidth=0,this.start={},this.move={},this.delta=0,this.drag=0,this.timer=null,this.direction=null,this.isAnimating=!1,this.isBlockPrev=!1,this.isBlockNext=!1,this.clicked=!1,this.setSlide(),this.setTimer(),this.bindEvent(),this.showSlide(this.option.start)}return _createClass(i,[{key:"setSlide",value:function(){var t,e,s=this;this.option.reactDrag="fade"!=this.option.type&&this.option.reactDrag,this.option.show="fade"==this.option.type?1:this.option.show,this.rectSlide=getRect(this.$el.slide),this.itemWidth=this.rectSlide.width/this.option.show,[].concat(_toConsumableArray(this.$el.slideItem)).forEach(function(t,e){t.setAttribute("data-slide-index",e),s.$el.indicator.innerHTML+='<li><button type="button"><span class="screen-out">총 '+s.slideNum+"장의 슬라이드 중 "+(e+1)+"번째 슬라이드</span></button></li>","carousel"==s.option.type&&(t.style.width=s.itemWidth+"px",t.style.left=(s.itemWidth+s.option.between)*e+"px")}),this.option.infinite&&"carousel"==this.option.type?(t=[].concat(_toConsumableArray(this.$el.slideItem)).filter(function(t,e){return e<s.option.show}),e=[].concat(_toConsumableArray(this.$el.slideItem)).reverse().filter(function(t,e){return e<s.option.show}),t.forEach(function(t,e){s.$el.slide.appendChild(t.cloneNode(!0)).style.left=(s.itemWidth+s.option.between)*s.slideNum+(s.itemWidth+s.option.between)*e+"px"}),e.forEach(function(t,e){s.$el.slide.insertBefore(t.cloneNode(!0),s.$el.slide.firstChild).style.left=-(s.itemWidth+s.option.between)*(e+1)+"px"})):this.option.infinite||"carousel"!=this.option.type||[].concat(_toConsumableArray(this.$wrap.querySelectorAll(".indicator li"))).forEach(function(t,e,i){e>s.slideNum-s.option.show&&i[e].remove()}),this.$el.indicatorItem=this.$wrap.querySelectorAll(".indicator li"),this.$el.slideItemDub=this.$wrap.querySelectorAll(".slide li")}},{key:"bindEvent",value:function(){var i=this;this.$el.btnPrev.addEventListener("click",function(){i.direction="prev",i.showSlide(i.slidePrev)}),this.$el.btnNext.addEventListener("click",function(){i.direction="next",i.showSlide(i.slideNext)}),[].concat(_toConsumableArray(this.$el.indicatorItem)).forEach(function(t,e){t.addEventListener("click",function(){i.direction=null,i.showSlide(e+1)})}),this.$el.btnTimer.addEventListener("click",function(){i.option.timer=!i.option.timer,i.setTimer()}),this.$el.slide.addEventListener("mousedown",function(t){return i.mouseDown(t)}),document.addEventListener("mousemove",function(t){return i.mouseMove(t)}),document.addEventListener("mouseup",function(){return i.mouseUp()})}},{key:"showSlide",value:function(t){return!this.isAnimating&&(this.isBlockNext&&(this.option.timer=!1,this.setTimer()),(this.isBlockPrev&&"prev"==this.direction||this.isBlockNext&&"next"==this.direction)&&(t=this.slideNow),this.stopTimer(),this.option.timer&&this.playTimer(),"carousel"==this.option.type?this.moveCarousel(t):"fade"==this.option.type&&this.moveFade(t),this.setIndex(t),this.setIndicator(),!this.option.infinite&&void this.setSlideBlock())}},{key:"moveFade",value:function(i){var s=this;[].concat(_toConsumableArray(this.$el.slideItem)).forEach(function(t){t.style.opacity=0});function n(t){r||(r=t,s.animationStart());var e=t-r,t=e/s.option.duration,t=inOutQuad(Math.min(t,1));s.$el.slideItem[o-1].style.opacity=1-t,s.$el.slideItem[i-1].style.opacity=t,e<s.option.duration?l=window.requestAnimationFrame(n):s.animationEnd()}var o=this.slideNow,r=null,l=null,l=window.requestAnimationFrame(n);0!==this.slideNow&&i!=this.slideNow||(this.$el.slideItem[i-1].style.opacity=1,cancelAnimationFrame(l))}},{key:"moveCarousel",value:function(t){function i(t){l||(l=t,s.animationStart());var e=t-l,t=e/s.option.duration,t=inOutQuad(Math.min(t,1));s.option.infinite&&n==s.slideNum&&"next"==s.direction?r=-1:s.option.infinite&&1==n&&"prev"==s.direction&&(r=1),s.$el.slide.style.transform="translate3d("+(-(s.itemWidth+s.option.between)*(n-1)+o+r*(s.itemWidth+s.option.between)*t-o*t)+"px, 0, 0)",e<s.option.duration?a=window.requestAnimationFrame(i):s.animationEnd()}var s=this,n=this.slideNow,o=this.drag,r=n-t,l=null,a=null,a=window.requestAnimationFrame(i);0===this.slideNow&&(this.$el.slide.style.transform="translate3d("+-(t-1)*this.rectSlide.width+"px, 0, 0)",cancelAnimationFrame(a))}},{key:"animationStart",value:function(){this.isAnimating=!0}},{key:"animationEnd",value:function(){this.isAnimating=!1}},{key:"setIndex",value:function(t){this.slideNow=t,this.slidePrev=t-1<1?this.slideNum:t-1,this.slideNext=t+1>this.slideNum?1:t+1}},{key:"setIndicator",value:function(){var i=this;[].concat(_toConsumableArray(this.$el.indicatorItem)).forEach(function(t,e){e===i.slideNow-1?t.classList.add("active"):t.classList.remove("active")})}},{key:"setSlideBlock",value:function(){this.$el.btnPrev.classList.remove("btn-disabled"),this.$el.btnNext.classList.remove("btn-disabled"),this.isBlockPrev=this.isBlockNext=!1,1==this.slideNow&&(this.$el.btnPrev.classList.add("btn-disabled"),this.isBlockPrev=!0),this.slideNow>this.slideNum-this.option.show&&(this.$el.btnNext.classList.add("btn-disabled"),this.isBlockNext=!0)}},{key:"setTimer",value:function(){this.option.timer?(this.playTimer(),this.$el.btnTimer.classList.add("active"),this.$el.btnTimer.setAttribute("aria-pressed",!1)):(this.stopTimer(),this.$el.btnTimer.classList.remove("active"),this.$el.btnTimer.setAttribute("aria-pressed",!0))}},{key:"playTimer",value:function(){var t=this;this.direction="next",this.timer=setTimeout(function(){t.showSlide(t.slideNext)},this.option.timerSpeed)}},{key:"stopTimer",value:function(){clearTimeout(this.timer)}},{key:"mouseDown",value:function(t){if(t.preventDefault(),!this.option.drag||this.isAnimating)return!1;this.start=getMousePos(t),this.clicked=!0}},{key:"mouseMove",value:function(t){return!!this.clicked&&(this.move=getMousePos(t),this.move.x<this.rectSlide.x||this.move.x>this.rectSlide.width+this.rectSlide.x?(this.delta=0,!1):(this.delta=this.move.x-this.start.x,!!this.option.reactDrag&&(this.drag=this.delta,(this.isBlockPrev&&0<this.delta||this.isBlockNext&&this.delta<0)&&(this.delta=this.drag=this.delta/5),void(this.$el.slide.style.transform="translate3d("+(-(this.itemWidth+this.option.between)*(this.slideNow-1)+this.drag)+"px, 0, 0)"))))}},{key:"mouseUp",value:function(){if(!this.clicked)return!1;this.delta<0?(this.direction="next",this.showSlide(this.slideNext)):0<this.delta?(this.direction="prev",this.showSlide(this.slidePrev)):this.showSlide(this.slideNow),this.delta=this.drag=0,this.clicked=!1,document.removeEventListener("mousemove",this.mouseMove),document.removeEventListener("mouseup",this.mouseUp)}}]),i}();